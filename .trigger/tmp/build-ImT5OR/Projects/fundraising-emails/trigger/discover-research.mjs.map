{
  "version": 3,
  "sources": ["../../../../../../trigger/discover-research.ts"],
  "sourcesContent": ["import { schedules, logger, metadata } from \"@trigger.dev/sdk\";\nimport { createClient } from \"@supabase/supabase-js\";\n\nconst supabase = createClient(\n    process.env.SUPABASE_URL!,\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\n);\n\n// ‚îÄ‚îÄ Types ‚îÄ‚îÄ\ninterface BrandKitRow {\n    user_id: string;\n    kit_name: string;\n    org_type: string;\n    org_level: string;\n    office_sought: string;\n    state: string;\n    district: string;\n    brand_summary: string;\n}\n\ninterface NewsAPIArticle {\n    source: { id: string | null; name: string };\n    author: string | null;\n    title: string;\n    description: string | null;\n    url: string;\n    urlToImage: string | null;\n    publishedAt: string;\n    content: string | null;\n}\n\ninterface NewsAPIResponse {\n    status: string;\n    totalResults: number;\n    articles: NewsAPIArticle[];\n}\n\ninterface ScoredTopic {\n    title: string;\n    summary: string;\n    source_url: string;\n    source_domain: string;\n    content_snippet: string;\n    relevance_score: number;\n}\n\n// ‚îÄ‚îÄ Tier-1 & Tier-2 news sources for scoring ‚îÄ‚îÄ\nconst TIER_1 = [\"nytimes.com\", \"washingtonpost.com\", \"reuters.com\", \"apnews.com\"];\nconst TIER_2 = [\"politico.com\", \"thehill.com\", \"cnn.com\", \"npr.org\", \"axios.com\", \"nbcnews.com\", \"bbc.com\", \"usatoday.com\"];\n\n// Political news domains for NewsAPI filtering\nconst POLITICAL_DOMAINS = [\n    \"nytimes.com\", \"washingtonpost.com\", \"politico.com\", \"thehill.com\",\n    \"cnn.com\", \"reuters.com\", \"apnews.com\", \"npr.org\", \"axios.com\",\n    \"nbcnews.com\", \"bbc.com\", \"usatoday.com\", \"foxnews.com\",\n    \"abcnews.go.com\", \"cbsnews.com\",\n].join(\",\");\n\n/**\n * Discover Research ‚Äî Scheduled Task (every 4 hours)\n *\n * Uses NewsAPI.org to fetch REAL news articles for each user.\n * No AI summarization ‚Äî returns actual headlines, descriptions, and URLs.\n *\n * For each user with a brand kit:\n * 1. Build search queries from their stances + org info\n * 2. Call NewsAPI.org /v2/everything\n * 3. Score results by source quality + recency\n * 4. Deduplicate against existing topics\n * 5. Save top results with suggested_by='ai'\n */\nexport const discoverResearch = schedules.task({\n    id: \"discover-research\",\n    machine: { preset: \"small-1x\" },\n    retry: {\n        maxAttempts: 2,\n        factor: 1.5,\n        minTimeoutInMs: 5000,\n        maxTimeoutInMs: 30_000,\n    },\n    run: async () => {\n        logger.info(\"üîç Discover Research ‚Äî scheduled run starting (NewsAPI.org)\");\n        metadata.set(\"status\", \"fetching_users\");\n\n        // 1. Fetch all brand kits\n        const { data: brandKits, error: bkError } = await supabase\n            .from(\"brand_kits\")\n            .select(\"user_id, kit_name, org_type, org_level, office_sought, state, district, brand_summary\");\n\n        if (bkError || !brandKits || brandKits.length === 0) {\n            logger.info(\"No brand kits found, skipping\", { error: bkError?.message });\n            return { usersProcessed: 0, totalSaved: 0 };\n        }\n\n        logger.info(`Found ${brandKits.length} brand kits to process`);\n        metadata.set(\"totalUsers\", brandKits.length);\n\n        let totalSaved = 0;\n        let usersProcessed = 0;\n\n        for (const kit of brandKits as BrandKitRow[]) {\n            try {\n                const saved = await processUserDiscovery(kit);\n                totalSaved += saved;\n                usersProcessed++;\n                metadata.set(\"usersProcessed\", usersProcessed).set(\"totalSaved\", totalSaved);\n            } catch (err) {\n                logger.error(`Failed to process user ${kit.user_id}`, {\n                    error: (err as Error).message,\n                });\n            }\n        }\n\n        metadata.set(\"status\", \"completed\");\n        logger.info(\"üéâ Discover Research complete\", { usersProcessed, totalSaved });\n\n        return { usersProcessed, totalSaved };\n    },\n});\n\n/**\n * Process discovery for a single user\n */\nasync function processUserDiscovery(kit: BrandKitRow): Promise<number> {\n    const queries = buildSearchQueries(kit);\n    if (queries.length === 0) {\n        logger.info(`Skipping user ${kit.user_id} ‚Äî no context to search`);\n        return 0;\n    }\n\n    // Fetch existing topic URLs for deduplication\n    const { data: existing } = await supabase\n        .from(\"research_topics\")\n        .select(\"source_url\")\n        .eq(\"user_id\", kit.user_id)\n        .order(\"created_at\", { ascending: false })\n        .limit(200);\n\n    const existingUrls = new Set((existing || []).map((t: { source_url: string }) => t.source_url));\n\n    // Run each query against NewsAPI (max 3 queries per user to stay within free tier)\n    const allTopics: ScoredTopic[] = [];\n\n    for (const query of queries.slice(0, 3)) {\n        logger.info(`Searching NewsAPI for user ${kit.user_id}`, { query });\n        const articles = await newsApiSearch(query);\n        allTopics.push(...articles);\n    }\n\n    if (allTopics.length === 0) {\n        logger.info(`No results for user ${kit.user_id}`);\n        return 0;\n    }\n\n    // Deduplicate by URL across all queries, then by existing DB entries\n    const seenUrls = new Set<string>();\n    const uniqueTopics = allTopics.filter((t) => {\n        if (seenUrls.has(t.source_url) || existingUrls.has(t.source_url)) return false;\n        seenUrls.add(t.source_url);\n        return true;\n    });\n\n    // Sort by score DESC, take top 8\n    const topTopics = uniqueTopics\n        .sort((a, b) => b.relevance_score - a.relevance_score)\n        .slice(0, 8);\n\n    let saved = 0;\n    for (const topic of topTopics) {\n        const { error } = await supabase.from(\"research_topics\").insert({\n            user_id: kit.user_id,\n            title: topic.title,\n            summary: topic.summary,\n            source_url: topic.source_url,\n            source_domain: topic.source_domain,\n            content_snippet: topic.content_snippet,\n            relevance_score: topic.relevance_score,\n            suggested_by: \"ai\",\n            used_in_draft: false,\n        });\n\n        if (!error) saved++;\n        else logger.error(\"Insert failed\", { title: topic.title, error: error.message });\n    }\n\n    logger.info(`Saved ${saved} articles for user ${kit.user_id}`);\n    return saved;\n}\n\n/**\n * Build up to 3 search queries from the user's brand kit.\n * Each query uses NewsAPI's OR syntax for multi-angle coverage.\n *\n * Query formats:\n * Q1: org_name OR (org_name + office)\n * Q2: (office + state) OR (district + state + office) OR (org_level + state + election)\n * Q3: stance keywords (extracted from brand_summary)\n */\nfunction buildSearchQueries(kit: BrandKitRow): string[] {\n    const queries: string[] = [];\n    const name = kit.kit_name?.trim();\n    const office = kit.office_sought?.trim();\n    const state = kit.state?.trim();\n    const district = kit.district?.trim();\n    const level = kit.org_level?.trim();\n    const summary = kit.brand_summary?.trim();\n\n    // ‚îÄ‚îÄ Query 1: Organization identity ‚îÄ‚îÄ\n    const q1Parts: string[] = [];\n    if (name) {\n        q1Parts.push(`\"${name}\"`);\n        if (office) q1Parts.push(`\"${name}\" AND \"${office}\"`);\n    }\n    if (q1Parts.length > 0) {\n        queries.push(q1Parts.join(\" OR \"));\n    }\n\n    // ‚îÄ‚îÄ Query 2: Race & geography ‚îÄ‚îÄ\n    const q2Parts: string[] = [];\n    if (office && state) {\n        q2Parts.push(`\"${office}\" AND \"${state}\"`);\n    }\n    if (district && state && office) {\n        q2Parts.push(`\"${district}\" AND \"${state}\"`);\n    }\n    if (office && district) {\n        q2Parts.push(`\"${office}\" AND \"${district}\" AND fundraising`);\n    }\n    if (level && state) {\n        q2Parts.push(`${level} AND \"${state}\" AND election`);\n    }\n    if (office && state) {\n        q2Parts.push(`\"${office}\" AND \"${state}\" AND election 2026`);\n    }\n    if (q2Parts.length > 0) {\n        // Take top 3 most specific, join with OR\n        queries.push(q2Parts.slice(0, 3).join(\" OR \"));\n    }\n\n    // ‚îÄ‚îÄ Query 3: Stance-based (policy keywords from brand summary) ‚îÄ‚îÄ\n    const stanceKeywords = extractStanceKeywords(summary);\n    if (stanceKeywords.length > 0 && (office || state)) {\n        const context = office || state || \"politics\";\n        const stanceParts = stanceKeywords\n            .slice(0, 3)\n            .map((kw) => `\"${kw}\" AND ${context}`);\n        queries.push(stanceParts.join(\" OR \"));\n    }\n\n    return queries;\n}\n\n/**\n * Call NewsAPI.org /v2/everything ‚Äî returns REAL articles.\n */\nasync function newsApiSearch(query: string): Promise<ScoredTopic[]> {\n    const apiKey = process.env.NEWSAPI_KEY;\n    if (!apiKey) {\n        logger.error(\"NEWSAPI_KEY not set\");\n        return [];\n    }\n\n    try {\n        const params = new URLSearchParams({\n            q: query,\n            domains: POLITICAL_DOMAINS,\n            sortBy: \"publishedAt\",\n            pageSize: \"10\",\n            language: \"en\",\n            apiKey,\n        });\n\n        const response = await fetch(`https://newsapi.org/v2/everything?${params}`);\n\n        if (!response.ok) {\n            const errorText = await response.text();\n            logger.error(\"NewsAPI error\", { status: response.status, body: errorText });\n            return [];\n        }\n\n        const data = (await response.json()) as NewsAPIResponse;\n\n        if (data.status !== \"ok\" || !data.articles || data.articles.length === 0) {\n            logger.info(\"NewsAPI returned no articles\", { query, totalResults: data.totalResults });\n            return [];\n        }\n\n        logger.info(`NewsAPI returned ${data.articles.length} articles`, { query });\n\n        return data.articles\n            .filter((a) => a.title && a.title !== \"[Removed]\" && a.url)\n            .map((article) => {\n                const domain = extractDomain(article.url);\n                const score = scoreArticle(article, domain);\n\n                return {\n                    title: article.title,\n                    summary: article.description || article.content?.slice(0, 300) || article.title,\n                    source_url: article.url,\n                    source_domain: domain,\n                    content_snippet: article.description || article.title,\n                    relevance_score: score,\n                };\n            });\n    } catch (err) {\n        logger.error(\"NewsAPI search failed\", { error: (err as Error).message });\n        return [];\n    }\n}\n\n/**\n * Score an article on a fixed 0-10 scale.\n * Based on source quality + recency.\n */\nfunction scoreArticle(article: NewsAPIArticle, domain: string): number {\n    let score = 3; // Base score ‚Äî it's a real article from a news source\n\n    // Source quality (0-4 points)\n    if (TIER_1.some((d) => domain.includes(d))) score += 4;\n    else if (TIER_2.some((d) => domain.includes(d))) score += 2.5;\n    else score += 1;\n\n    // Recency bonus (0-2 points)\n    if (article.publishedAt) {\n        const hoursAgo = (Date.now() - new Date(article.publishedAt).getTime()) / (1000 * 60 * 60);\n        if (hoursAgo <= 4) score += 2;\n        else if (hoursAgo <= 12) score += 1.5;\n        else if (hoursAgo <= 24) score += 1;\n        else if (hoursAgo <= 48) score += 0.5;\n    }\n\n    // Content completeness (0-1 point)\n    if (article.description && article.description.length > 50) score += 0.5;\n    if (article.urlToImage) score += 0.5;\n\n    return Math.min(Math.round(score * 100) / 100, 10);\n}\n\n/**\n * Extract stance-like keywords from the brand summary.\n */\nfunction extractStanceKeywords(summary: string | undefined): string[] {\n    if (!summary) return [];\n\n    const policyTerms = [\n        \"healthcare\", \"health care\", \"medicare\", \"medicaid\",\n        \"climate\", \"environment\", \"clean energy\", \"green\",\n        \"education\", \"schools\", \"student\",\n        \"immigration\", \"border\",\n        \"economy\", \"jobs\", \"inflation\", \"wages\",\n        \"gun\", \"firearms\", \"second amendment\",\n        \"abortion\", \"reproductive\", \"women's health\",\n        \"housing\", \"rent\", \"affordable housing\",\n        \"criminal justice\", \"police\", \"public safety\",\n        \"veterans\", \"military\", \"defense\",\n        \"taxes\", \"tax reform\",\n        \"voting rights\", \"election integrity\",\n        \"infrastructure\", \"transportation\",\n        \"social security\", \"retirement\",\n    ];\n\n    const lower = summary.toLowerCase();\n    return policyTerms.filter((term) => lower.includes(term));\n}\n\nfunction extractDomain(url: string): string {\n    try {\n        return new URL(url).hostname.replace(\"www.\", \"\");\n    } catch {\n        return \"\";\n    }\n}\n"],
  "mappings": "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",
  "names": []
}
